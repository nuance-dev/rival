# RIVAL - Project Specification

## Project Overview
"RIVAL" (formerly "RIVAL") is a next-generation web application built with Next.js and Tailwind CSS v4 that displays AI model capabilities in an immersive, interactive way. The application showcases various AI models (Grok 3, Claude Sonnet 3.7/3.5, GPT-4o, GPT-o3, GPT-o1, Anthropic Claude 3 Haiku/Opus, etc.) with their responses to one-shot prompts, displayed in dynamic, expandable canvases.

## Design Philosophy
- **Aesthetic**: Minimalist yet distinctive design with subtle retro-inspired elements, drawing from industry leaders like Framer, Rive, Vercel, Linear, Supabase, Webflow, Valorant, Arc, Raycast, and Spline
- **UX Principles**: Progressive disclosure, intuitive navigation, smooth animations, Apple-inspired minimal UX ethos
- **Visual Identity**: High contrast, purposeful typography, subtle retro-inspired animations, meaningful white space
- **Content-Forward Design**: Show actual AI outputs directly on cards without requiring clicks to view content
- **Minimal Navigation**: Reduce reliance on traditional navbar, use contextual navigation and progressive disclosure
- **Immersive Gallery**: Organize content in a visually stunning grid/mosaic layout by categories on the home page
- **Seamless Interactions**: Subtle hover effects, fluid animations, and contextual expansions
- **Refined Aesthetic**: Elevated grayscale palette with strategic accent colors for hierarchy
- **Typography**: Modern, daring display fonts (Space Grotesk) for titles with clean sans-serif (Geist) for body text
- **Retro Inspiration**: Subtle CRT scan lines, pixel-perfect borders, VHS distortion effects, and terminal-inspired cursor blinks
- **Framer-Inspired Elements**: High-quality hover animations, glass effects, and fluid layout transitions

## Technology Stack
- **Framework**: Next.js 14 (App Router)
- **Styling**: Tailwind CSS v4
- **Animation**: Framer Motion
- **State Management**: React Context API + Zustand
- **Deployment**: Vercel

## Core Features
1. **Interactive Model Showcase**
   - Dynamic display of AI model responses to one-shot prompts âœ…
   - Expandable canvases that showcase AI outputs (websites, text, images, SVGs, etc.) âœ…
   - Smooth transitions and animations with subtle retro effects âœ…

2. **AI Models Integration**
   - Display capabilities of various AI models âœ…
   - Show model-specific information (specs, capabilities) âœ…
   - Compare outputs between different models âœ…

3. **Responsive Canvas System**
   - Expandable/collapsible canvases for each AI output âœ…
   - Interactive elements within canvases with retro-inspired details âœ…
   - Smooth transitions between states enhanced with Framer-style animations âœ…

4. **Prompt Challenges Gallery**
   - Curated collection of challenging AI prompts âœ…
   - Organization by category, difficulty, and output type âœ…
   - Visual indicators for challenge complexity and expected output âœ…
   - Expandable views to examine model responses with retro-inspired UI elements âœ…

5. **Model Responses Archive** âœ…
   - Detailed archive of model-specific responses âœ…
   - Categorization by response type (text, code, website, SVG, etc.) âœ…
   - Expandable views to examine full responses with subtle CRT effects âœ…
   - Response metadata and contextual information âœ…

6. **Output Card Redesign**
   - Transformed from hidden-content cards to content-forward showcases âœ…
   - Minimalist card design with headers/footers removed for cleaner UI âœ…
   - Model information moved to hover overlay for better visibility âœ…
   - One-shot badge positioned in top-right corner for better visibility âœ…
   - Taller card height for better content display âœ…
   - Website outputs with live iframe previews directly visible in cards âœ…
   - Hidden scrollbars in web design cards for consistent appearance âœ…
   - Code outputs with syntax highlighting and advanced interactions âœ…
   - Image outputs with subtle zoom/parallax effects on hover âœ…
   - Text outputs with elegant typography and formatting âœ…
   - Expandable cards with smooth animations via AnimatePresence âœ…
   - Retro-inspired design details integrated throughout the card system âœ…
   - Fixed maximum height for cards to prevent layout issues âœ…
   - Properly positioned hover expand icon (bottom-right) to prevent overlap with model information âœ…
   - Model information overlay displayed on card hover for quick identification âœ…
   - Challenge-specific titles replacing generic content type labels âœ…
   - Improved model name display in expanded card view âœ…
   - Enhanced card sorting prioritizing visually rich content types âœ…
   - Markdown rendering support for text responses, allowing proper formatting of headings, lists, code blocks, and more âœ…
   - Support for fun fact tooltips in expanded view to provide interesting information about model responses âœ…

7. **Animation Improvements**
   - Added useSafeAnimation hook to prevent double-triggering of animations âœ…
   - Optimized animation loading and visibility states using sessionStorage âœ…
   - Implemented proper animation sequencing for smoother transitions âœ…
   - Fixed jumping animation issues throughout all application sections âœ…
   - Enhanced hover effects with proper positioning and timing âœ…
   - Reduced animation durations for snappier, more responsive interactions âœ…
   - Improved card expansion/collapse with better exit animations to prevent disappearing elements âœ…
   - Fixed ghost cards on initial load with optimized loading strategy âœ…
   - Enhanced preloading of card batches for smoother infinite scroll âœ…

8. **Navigation Improvements**
   - Consistent navbar across all pages with retro glow effect âœ…
   - Progressive disclosure of navigation options âœ…
   - Contextual navigation elements where appropriate âœ…
   - Removed insights section for more focused experience âœ…
   - Updated VERSUS branding with retro shimmer effect âœ…

9. **UI Fixes**
   - Fixed hover overlay issues to ensure a cleaner interface âœ…
   - Added proper Layout component to all pages for consistent navigation âœ…
   - Fixed metadata handling in client components âœ…
   - Improved iframe sandbox handling to allow proper script execution âœ…
   - Updated to Space Grotesk font for more distinctive headings âœ…
   - Added attribution and external links to nuanced âœ…
   - Integrated retro-inspired design elements throughout the UI âœ…
   - Added Framer-inspired animation and interaction patterns âœ…
   - Fixed ghost cards issue on initial load of home page âœ…

10. **Advanced Model Comparison** ðŸ†•
   - Interactive side-by-side comparison of two selected AI models âœ…
   - Model selector with provider grouping and visual identification âœ…
   - Challenge filtering by category and difficulty âœ…
   - Live search functionality for quickly finding specific challenges âœ…
   - Smooth animated transitions between states with loading indicators âœ…
   - Direct links to individual model pages for additional information âœ…
   - Support for all content types (text, code, website, SVG, image) in comparison view âœ…
   - Responsive design for both desktop and mobile experiences âœ…
   - Modal-based model selection with spring physics animations âœ…
   - Intelligent grouping of challenges based on available model responses âœ…

## Project Structure
```
versus/
â”œâ”€â”€ app/                  # Next.js app router
â”‚   â”œâ”€â”€ api/              # API routes
â”‚   â”œâ”€â”€ challenges/       # Challenge pages
â”‚   â”œâ”€â”€ models/           # Model pages
â”‚   â”‚   â””â”€â”€ [id]/         # Model detail pages
â”‚   â”‚       â””â”€â”€ responses/# Model response pages
â”‚   â”‚           â””â”€â”€ [responseId]/ # Response detail pages
â”‚   â”œâ”€â”€ comparisons/      # Comparison pages
â”‚   â”œâ”€â”€ compare/          # NEW: Interactive model comparison section
â”‚   â”œâ”€â”€ capabilities/     # Capability pages
â”‚   â””â”€â”€ layout.tsx        # Root layout
â”œâ”€â”€ components/           # React components
â”‚   â”œâ”€â”€ ui/               # UI components
â”‚   â”œâ”€â”€ canvas/           # Canvas components
â”‚   â”‚   â”œâ”€â”€ NewOutputCard.tsx  # Main card component wrapper
â”‚   â”‚   â”œâ”€â”€ ModelCanvas.tsx    # Canvas component
â”‚   â”‚   â”œâ”€â”€ ExpansionProvider.tsx # Context for card expansion state
â”‚   â”‚   â”œâ”€â”€ card/         # Card component pieces
â”‚   â”‚   â”‚   â”œâ”€â”€ CardContent.tsx    # Handles rendering of different content types
â”‚   â”‚   â”‚   â”œâ”€â”€ ExpandedCard.tsx   # Card in expanded view
â”‚   â”‚   â”‚   â”œâ”€â”€ CardHeader.tsx     # Header component for cards
â”‚   â”‚   â”‚   â”œâ”€â”€ SVGRenderer.tsx    # Safely renders SVG content with error boundaries
â”‚   â”‚   â”‚   â”œâ”€â”€ utils/             # Utility functions for cards
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ svgUtils.ts    # SVG sanitization and handling utilities 
â”‚   â”‚   â”‚   â””â”€â”€ index.ts           # Exports card components and hooks
â”‚   â”‚   â”œâ”€â”€ FunFactTooltip.tsx     # Tooltip for fun facts
â”‚   â”‚   â”œâ”€â”€ LazyImage.tsx          # Lazy-loaded images with placeholders
â”‚   â”‚   â”œâ”€â”€ LazyIframe.tsx         # Lazy-loaded iframes with sandboxing
â”‚   â”‚   â”œâ”€â”€ ModelIcon.tsx          # Model logo/icon component
â”‚   â”‚   â”œâ”€â”€ ModelInfoOverlay.tsx   # Hover overlay for model information
â”‚   â”‚   â””â”€â”€ OneShotBadge.tsx       # Badge for one-shot responses
â”‚   â”œâ”€â”€ models/           # AI model components
â”‚   â”‚   â”œâ”€â”€ ModelOutput.tsx     # Output display component
â”‚   â”‚   â””â”€â”€ ModelResponseCard.tsx # Response card component
â”‚   â””â”€â”€ layout/           # Layout components
â”œâ”€â”€ hooks/                # Custom React hooks
â”‚   â”œâ”€â”€ useSafeAnimation.ts # Hook to prevent animation jumping and double-triggering
â”œâ”€â”€ lib/                  # Utility functions & shared logic
â”‚   â”œâ”€â”€ data/             # Data files
â”‚   â”‚   â”œâ”€â”€ models.ts     # AI model definitions
â”‚   â”‚   â”œâ”€â”€ prompts.ts    # Challenge prompt definitions
â”‚   â”‚   â””â”€â”€ comparisons.ts# Model comparison definitions
â”‚   â”œâ”€â”€ model-responses/  # Individual model responses
â”‚   â”‚   â”œâ”€â”€ index.ts      # Aggregates and exports all responses with helper functions
â”‚   â”‚   â”œâ”€â”€ gpt-4o/       # GPT-4o responses
â”‚   â”‚   â”‚   â”œâ”€â”€ index.ts  # Exports all GPT-4o responses
â”‚   â”‚   â”‚   â””â”€â”€ website-landing-page.ts # Individual response file
â”‚   â”‚   â”œâ”€â”€ claude-3-7-sonnet/ # Claude 3.7 responses
â”‚   â”‚   â”‚   â”œâ”€â”€ index.ts  # Exports all Claude 3.7 responses
â”‚   â”‚   â”‚   â””â”€â”€ movie-analysis.ts # Individual response file 
â”‚   â”‚   â””â”€â”€ grok-3/       # Grok 3 responses
â”‚   â”‚       â”œâ”€â”€ index.ts  # Exports all Grok 3 responses
â”‚   â”‚       â””â”€â”€ todo-app.ts # Individual response file
â”‚   â”œâ”€â”€ prompt-challenges.ts  # Challenge data structure
â”‚   â””â”€â”€ utils.ts          # Utility functions
â”œâ”€â”€ public/               # Static assets
â”‚   â”œâ”€â”€ models/           # AI model SVG logos
â”œâ”€â”€ styles/               # Global styles
â””â”€â”€ types/                # TypeScript type definitions
```

## Page Structure
1. **Home Page** âœ…
   - Hero section with introduction and retro-inspired elements
   - Featured AI model showcase
   - Navigation to different model categories
   - Subtle CRT and VHS effects integrated throughout
   - Prioritized display of visually appealing content (web design and images)
   - Infinite scroll for efficient loading of model responses

2. **Model Pages** âœ…
   - Dedicated pages for each model category
   - Interactive canvas displays with retro design elements
   - Model details and specifications
   - Latest model responses section âœ…
   - Example outputs section âœ…
   - Related models from same provider âœ…

3. **Model Response Pages** âœ…
   - List of all responses for a specific model âœ…
   - Categorization by response type âœ…
   - Response cards with title, description, and date âœ…
   - Detailed individual response pages with retro-inspired UI elements âœ…

4. **Response Detail Pages** âœ…
   - Full display of model response with subtle retro effects âœ…
   - Original prompt that generated the response âœ…
   - Response metadata and contextual information âœ…
   - Model information and specifications âœ…

5. **Comparison Pages** âœ…
   - Side-by-side comparison of model outputs
   - Tabbed interface to switch between models
   - Shared prompt context
   - Retro-inspired design elements throughout

6. **Capabilities Pages** âœ…
   - Categorization by AI capabilities
   - Examples of different AI capabilities
   - Interactive demonstrations with subtle retro flair

7. **Challenge Pages** âœ…
   - Challenge gallery with categorization by type âœ…
   - Filtering by difficulty and output type âœ…
   - Detailed individual challenge pages âœ…
   - Side-by-side AI model response comparisons âœ…
   - Retro-inspired design elements integrated throughout âœ…
   - Fixed issue with mock data being used instead of real model responses âœ…
   - Fixed layout issues with card spacing and animations âœ…
   - Added proper error handling for cases with no responses âœ…
   - Improved animation management to prevent layout jumps âœ…

8. **Compare Page** ðŸ†•
   - Interactive model selection interface with provider grouping âœ…
   - Challenge selection with category filtering âœ… 
   - Real-time search functionality âœ…
   - Side-by-side display of model responses âœ…
   - Smooth animated transitions with loading states âœ…
   - Challenge details with original prompt display âœ…
   - Deep linking to individual model and challenge pages âœ…
   - Intelligent filtering for challenges with responses from both selected models âœ…
   - Modal-based model selector with spring physics animations âœ…
   - Responsive layout for mobile and desktop devices âœ…

## Design Components
1. **Header** âœ…
   - Minimal navigation with hover-lift effect
   - Elegant branding with Jacquard 24 font for logo and retro shimmer
   - Theme toggle for dark/light mode

2. **AI Model Card** âœ…
   - Model information with pixel-perfect borders
   - Canvas container for output with subtle CRT scan line effect
   - Expand/collapse functionality with Framer-inspired animations
   - Model name and logo displayed on hover

3. **Canvas System** âœ…
   - Regular view (collapsed) with retro design elements
   - Expanded view with CRT scan lines effect
   - Interactive elements with hover-lift and retro glow
   - Clear model attribution and challenge identification

4. **Challenge Card** âœ…
   - Challenge metadata (difficulty, category, output type)
   - Preview of prompt
   - Visual categorization
   - Retro-inspired design elements

5. **Response Card** âœ…
   - Response title and description with pixel-perfect borders
   - Response type indicator
   - Response date metadata
   - Card linking to full response
   - Subtle retro effects integrated throughout
   - Model information displayed on hover
   - Challenge-specific titles instead of generic type labels

6. **Footer** âœ…
   - Credits and information
   - Links to resources and creator profiles
   - Attribution to nuanced with external links to website, social media, GitHub, and Buy Me a Coffee

7. **Model Selector** ðŸ†•
   - Modal-based interface with subtle backdrop blur âœ…
   - Models grouped by provider for better organization âœ…
   - Visual indicators for selected models âœ…
   - Model logo and brief description for better identification âœ…
   - Spring physics animations for smooth interactions âœ…

8. **Challenge Filter** ðŸ†•
   - Category-based filter buttons with active state indicators âœ…
   - Search input with clear functionality âœ…
   - Visual feedback for selected challenge âœ…
   - Card-based challenge display with important metadata âœ…

## Animation Strategy
- Subtle hover effects with purposeful feedback âœ…
- Smooth transitions between canvas states using AnimatePresence âœ…
- Scroll-triggered animations with staggered effects âœ…
- Microinteractions for engagement without overwhelming the user âœ…
- Category-based staggered animations for visual grouping âœ…
- Retro-inspired animations like cursor blink and VHS distortion âœ…
- Framer-inspired spring physics for natural-feeling interactions âœ…
- Safe animation handling to prevent duplicate triggers âœ…
- Fixed double animation issues in ModelCard, ChallengeCard, and NewOutputCard components âœ…
- Enhanced infinite scroll loading indicator for better user feedback âœ…
- Improved animation state tracking using useEffect to prevent animation flickering âœ…
- Optimized animation timing and delays for smoother user experience âœ…
- Modal animations with smooth scale and opacity transitions âœ…
- Loading spinner animations for visual feedback during state changes âœ…

## Responsive Design
- Mobile-first approach âœ…
- Adaptive canvas sizing for different devices âœ…
- Optimized interactions for touch devices âœ…
- Responsive grid layouts for galleries âœ…
- Retro design elements that scale appropriately across devices âœ…
- Maximum height constraints for components to maintain consistency âœ…
- Responsive compare view that switches from side-by-side to stacked on mobile âœ…

## Performance Optimization
- Static generation where possible âœ…
- Dynamic imports for code splitting âœ…
- Image optimization with SimpleImage component ðŸŸ¡
- Efficient state management with React Context âœ…
- Proper iframe sandboxing for security and performance âœ…
- Optimized retro effects that don't impact performance âœ…
- Infinite scroll for efficient loading of large datasets âœ…
- Virtualized rendering for output cards âœ…
- Lazy loading of content with placeholder transitions âœ…
- Optimized observer patterns for intersection detection âœ…
- Performance metrics logging for detailed debugging âœ…
- Memoized challenge filtering to prevent unnecessary recalculations âœ…
- Optimized modal rendering with proper cleanup âœ…

## Implementation Plan

### Phase 1-6: Initial Implementation âœ…
1-6. All initial phases completed

### Phase 7: Refinement and Enhancements âœ…
1. Optimize performance across devices
2. Enhanced animations and transitions with Framer Motion
3. Improved accessibility for all users
4. Fixed UI/UX issues:
   - Card expansion with proper AnimatePresence implementation âœ…
   - Fixed iframe sandbox attributes to allow proper script execution âœ…
   - Added Layout component to all pages for consistent navigation âœ…
   - Fixed metadata handling in client components âœ…
   - Updated typography with Space Grotesk for headings âœ…
   - Added external links and attribution to nuanced âœ…
   - Removed insights section for more focused experience âœ…
   - Integrated retro-inspired design elements throughout the UI âœ…
   - Fixed challenge pages to use real model responses instead of mock data âœ…
   - Fixed layout issues with card spacing and animations in challenge pages âœ…

### Phase 8: Retro Design Integration and Framer-Inspired Interactions âœ…
1. Added subtle CRT scan lines effect to key UI elements
2. Implemented pixel-perfect borders for UI components
3. Added VHS distortion effects for image displays
4. Created terminal-inspired cursor blink animations
5. Designed retro color gradients using strategic accent colors
6. Enhanced hover state animations with lift effects
7. Improved card hover interactions with subtle shadows and transforms
8. Created glass-like surfaces with refined backdrop blur effects
9. Implemented smoother expansion/collapse animations using Framer Motion spring physics

### Phase 9: Gallery Experience Improvements âœ…
1. Prioritized visually appealing content (web design and images) on home page 
2. Implemented infinite scroll for efficient loading of model responses
3. Enhanced card hover experience with model information overlay
4. Replaced generic type labels with challenge-specific titles
5. Fixed model name display in expanded view
6. Improved card organization with type-based prioritization

### Phase 10: Advanced Comparison Feature ðŸ†•
1. Created new dedicated compare page for side-by-side model comparison âœ…
2. Implemented interactive model selection with provider categorization âœ…
3. Developed dynamic challenge filtering system based on model selection âœ…
4. Added smooth animations and transitions between comparison states âœ…
5. Built modal-based model selector with spring physics animations âœ…
6. Added real-time search functionality for challenge discovery âœ…
7. Optimized memory usage with proper cleanup of animation states âœ…
8. Implemented responsive design for mobile and desktop experiences âœ…
9. Added direct linking to model and challenge detail pages âœ…
10. Enhanced user experience with subtle loading indicators âœ…

## Current Progress
- âœ… Project setup and structure established
- âœ… Core layout components implemented (Header, Footer, Hero)
- âœ… Canvas component system created with expand/collapse
- âœ… Model displays and cards implemented
- âœ… Model comparison functionality implemented
- âœ… Routes created for models, comparisons, capabilities
- âœ… Theme toggle for dark/light mode added
- âœ… Capability icons and categorization added
- âœ… Scroll-triggered animations implemented
- âœ… Comprehensive error states and loading indicators added
- âœ… Challenge gallery with 25 diverse AI challenges implemented
- âœ… Challenge detail pages with model responses created
- âœ… Interactive challenge filtering by category, difficulty, and output type fully implemented
- âœ… Model response system implemented with categorization by type
- âœ… Response detail pages created with full context and model information
- âœ… Redesigned content-forward NewOutputCard component implemented
- âœ… Fixed UI issues with card expansion and hover effects
- âœ… Ensured consistent navigation across all pages with Layout component
- âœ… Fixed metadata handling in client components
- âœ… Updated fonts with Space Grotesk for more distinctive headings
- âœ… Removed insights section for more focused experience
- âœ… Added attribution and external links to nuanced
- âœ… Rebranded from "AI Showcase" to "RIVAL" throughout the application
- âœ… Integrated subtle retro-inspired design elements (CRT scan lines, pixel-perfect borders, VHS distortion)
- âœ… Implemented Framer-inspired interactions and animations
- âœ… Updated color scheme with new retro-inspired accent colors
- âœ… Replaced favicon.ico with SVG version for modern browsers
- âœ… Created utility for mapping model IDs to their respective SVG logos
- âœ… Fixed retro gradient flash issues with proper transitions
- âœ… Implemented safe animation hook to prevent animation jumps
- âœ… Added infinite scroll for efficient loading of model responses
- âœ… Enhanced card hover experience with model information overlay
- âœ… Replaced generic type labels with challenge-specific titles
- âœ… Fixed model name display in expanded view
- âœ… Improved home page with prioritized display of visual content (web design and images)
- âœ… Added new Xbox controller SVG challenge with responses from multiple AI models
- âœ… Fixed ghost cards on initial load with optimized loading strategy
- âœ… Enhanced preloading of card batches for smoother infinite scroll
- âœ… Implemented virtualized rendering for improved performance with large collections of responses
- âœ… Added performance metrics logging in development mode
- âœ… Optimized loading with intelligent batching and placeholders
- âœ… Created custom useVirtualizedItems hook for reusable virtualization logic
- âœ… Fixed challenge pages to use real model responses instead of mock data
- âœ… Fixed layout issues with card spacing and animations in challenge pages
- âœ… Improved animation management to prevent layout jumps
- âœ… Removed Unicode challenge and all associated model responses
- âœ… Added Xbox controller SVG challenge responses for deepseek-r1, gemini-2-0-pro-exp, and gemini-2-0-flash-thinking-exp models
- âœ… Added Xbox controller SVG and World Map SVG challenge responses for o1, o3-mini, and grok-3-thinking models
- âœ… Fixed card expansion bug where the application would crash with "ReferenceError: Can't find variable: renderContent" by implementing the missing renderContent function
- âœ… Refactored NewOutputCard into modular components for better code organization and maintainability
- âœ… Added comprehensive SVG sanitization to handle malformed SVG content, preventing React from crashing
- âœ… Enhanced SVGRenderer with proper error boundaries and fallback rendering
- âœ… Fixed duplicate React key issues in expanded card components
- âœ… Added special handling for World Map SVGs with problematic path data for North America and Antarctica regions
- âœ… Added enhanced error handling for Xbox controller SVG content
- âœ… Implemented dedicated Compare page for interactive side-by-side model comparison
- âœ… Created modal-based model selector with provider categorization
- âœ… Added dynamic challenge filtering based on selected models
- âœ… Implemented smooth animations with Framer Motion for seamless transitions
- âœ… Optimized memory usage with proper cleanup of animation states
- ðŸ”„ Continuing to enhance UI polish and interactions


## Animation Strategy

- **Animation Principles:**
  - Use Framer Motion for smooth, performant animations
  - Implement staggered animations for sequential elements
  - Ensure animations enhance rather than hinder the user experience
  - Fixed animation issues that were causing layout shifts and gaps
  - Added isInitialRender flag to control when animations should be applied
  - Enhanced ExpansionProvider to manage animation states more effectively
  - Simplified animation hierarchy to prevent conflicting layout calculations